![[Снимок экрана 2024-02-11 в 23.01.24.png]]
Это про то, что мы не хотим в саму таблицу лезть за данными, а хотим доставать из индекса сразу все, что нужно.



![[Снимок экрана 2024-02-11 в 23.33.34.png]]

Тут про то, что запрос  должен видеть все возвращаемые строки в снапшоте своем текущем(по сути снапшот транзакции), а  эта инфа не хранится в индексах, а только в хипе.  Поэтому вроде кажется, что для каждой извлеченной строки все-равно потребуется доступ к хипу. И это действительно так, если эта строка была недавно изменена. Но для редко меняющихся данных можно обойти эту проблему.  PostgreSQL отслеживает для каждой страницы в куче таблицы, являются ли все строки, хранящиеся на этой странице, достаточно старыми, чтобы их можно было увидеть для всех текущих и будущих транзакций. Эта информация хранится в так называемой   карте видимости таблицы.  Таблицы, где много строк давно не менялись  достаточно часто встречаются, поэтому это сканирование достаточно полезно и помогает.



![[Снимок экрана 2024-02-11 в 23.47.12.png]]


Есть такая команда для полей,   как include (когда создаешь индексы). По сути это значит, что по этому полю не будет поиск производиться, но его зато можно будет достать из индекса вместе с индексированными полями, не залезая в саму таблицу БД.